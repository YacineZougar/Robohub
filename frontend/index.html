<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RoboHub - Robot Management System</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&family=Syne:wght@400;600;700;800&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Toast Notifications Container -->
    <div id="toast-container" role="status" aria-live="polite" aria-atomic="true"></div>

    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <svg class="logo-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 2L2 7L12 12L22 7L12 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M2 17L12 22L22 17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M2 12L12 17L22 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <span class="logo-text">RoboHub</span>
                </div>
                <nav class="nav">
                    <button class="nav-btn active" data-view="robots" aria-label="View Robots">
                        <span>Robots</span>
                    </button>
                    <button class="nav-btn" data-view="maintenance" aria-label="View Maintenance Logs">
                        <span>Maintenance</span>
                    </button>
                </nav>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main">
        <div class="container">
            <!-- Robots View -->
            <section id="robots-view" class="view active">
                <div class="view-header">
                    <div class="view-title-group">
                        <h1 class="view-title">Robot Fleet</h1>
                        <p class="view-subtitle">Manage your robotic systems and components</p>
                    </div>
                    <button class="btn btn-primary" id="add-robot-btn" aria-label="Add New Robot">
                        <svg class="btn-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 5V19M5 12H19" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        <span>Add Robot</span>
                    </button>
                </div>

                <!-- Loading State -->
                <div id="robots-loading" class="loading-state" role="status" aria-live="polite">
                    <div class="spinner"></div>
                    <p>Loading robots...</p>
                </div>

                <!-- Empty State -->
                <div id="robots-empty" class="empty-state hidden" role="status">
                    <div class="empty-icon">
                        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <rect x="4" y="4" width="16" height="16" rx="2" stroke="currentColor" stroke-width="2"/>
                            <path d="M12 8V16M8 12H16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                    </div>
                    <h2>No Robots Yet</h2>
                    <p>Get started by adding your first robot to the fleet</p>
                    <button class="btn btn-secondary" onclick="document.getElementById('add-robot-btn').click()">
                        Add First Robot
                    </button>
                </div>

                <!-- Robots Grid -->
                <div id="robots-grid" class="robots-grid hidden"></div>
            </section>

            <!-- Maintenance Logs View -->
            <section id="maintenance-view" class="view">
                <div class="view-header">
                    <div class="view-title-group">
                        <h1 class="view-title">Maintenance Logs</h1>
                        <p class="view-subtitle">Track all maintenance activities</p>
                    </div>
                </div>

                <!-- Loading State -->
                <div id="maintenance-loading" class="loading-state" role="status" aria-live="polite">
                    <div class="spinner"></div>
                    <p>Loading maintenance logs...</p>
                </div>

                <!-- Empty State -->
                <div id="maintenance-empty" class="empty-state" role="status">
                    <div class="empty-icon">
                        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2" stroke="currentColor" stroke-width="2"/>
                        </svg>
                    </div>
                    <h2>No Maintenance Logs</h2>
                    <p>Maintenance logs will appear here when created</p>
                </div>

                <!-- Maintenance Logs Table -->
                <div id="maintenance-table-container" class="table-container">
                    <table class="data-table" role="table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Robot ID</th>
                                <th>Part ID</th>
                                <th>Description</th>
                                <th>Log Date</th>
                                <th>Done By</th>
                            </tr>
                        </thead>
                        <tbody id="maintenance-table-body"></tbody>
                    </table>
                </div>
            </section>
        </div>
    </main>

    <!-- Modal for Add/Edit Robot -->
    <div id="robot-modal" class="modal" role="dialog" aria-modal="true" aria-labelledby="robot-modal-title">
        <div class="modal-overlay"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="robot-modal-title" class="modal-title">Add Robot</h2>
                <button class="modal-close" aria-label="Close modal">
                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M18 6L6 18M6 6L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                </button>
            </div>
            <form id="robot-form" class="modal-form">
                <div class="form-group">
                    <label for="robot-name" class="form-label">Robot Name *</label>
                    <input type="text" id="robot-name" name="name" class="form-input" required maxlength="50" placeholder="e.g., Assembly Bot Alpha">
                </div>
                <div class="form-group">
                    <label for="robot-type" class="form-label">Robot Type *</label>
                    <input type="text" id="robot-type" name="type" class="form-input" required maxlength="50" placeholder="e.g., Industrial Assembly">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-ghost" data-dismiss-modal>Cancel</button>
                    <button type="submit" class="btn btn-primary">
                        <span class="btn-text">Save Robot</span>
                        <span class="btn-loading hidden">Saving...</span>
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal for Robot Details (Parts & Maintenance) -->
    <div id="robot-detail-modal" class="modal modal-wide" role="dialog" aria-modal="true" aria-labelledby="robot-detail-title">
        <div class="modal-overlay"></div>
        <div class="modal-content">
            <div class="modal-header">
                <div>
                    <h2 id="robot-detail-title" class="modal-title">Robot Details</h2>
                    <p id="robot-detail-subtitle" class="modal-subtitle"></p>
                </div>
                <button class="modal-close" aria-label="Close modal">
                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M18 6L6 18M6 6L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                </button>
            </div>
            <div class="modal-body">
                <!-- Tabs -->
                <div class="tabs" role="tablist">
                    <button class="tab active" data-tab="parts" role="tab" aria-selected="true" aria-controls="parts-panel">Parts</button>
                    <button class="tab" data-tab="maintenance" role="tab" aria-selected="false" aria-controls="maintenance-panel">Maintenance Logs</button>
                </div>

                <!-- Parts Panel -->
                <div id="parts-panel" class="tab-panel active" role="tabpanel" aria-labelledby="parts-tab">
                    <div class="panel-header">
                        <h3 class="panel-title">Robot Parts</h3>
                        <button class="btn btn-secondary btn-sm" id="add-part-btn">
                            <svg class="btn-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12 5V19M5 12H19" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                            <span>Add Part</span>
                        </button>
                    </div>
                    <div id="parts-loading" class="loading-state-sm">
                        <div class="spinner"></div>
                    </div>
                    <div id="parts-empty" class="empty-state-sm">
                        <p>No parts added yet</p>
                    </div>
                    <div id="parts-list" class="parts-list"></div>
                </div>

                <!-- Maintenance Panel -->
                <div id="maintenance-panel" class="tab-panel" role="tabpanel" aria-labelledby="maintenance-tab">
                    <div class="panel-header">
                        <h3 class="panel-title">Maintenance History</h3>
                        <div class="filter-group">
                            <label class="filter-label hidden">
                                <input type="checkbox" id="filter-parts-logs" checked>
                                <span>Include Part-Specific Logs</span>
                            </label>
                        </div>
                        <button class="btn btn-secondary btn-sm" id="add-maintenance-btn">
                            <svg class="btn-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12 5V19M5 12H19" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                            <span>Add Log</span>
                        </button>
                    </div>
                    <div id="robot-maintenance-loading" class="loading-state-sm">
                        <div class="spinner"></div>
                    </div>
                    <div id="robot-maintenance-empty" class="empty-state-sm hidden">
                        <p>No maintenance logs yet</p>
                    </div>
                    <div id="robot-maintenance-list" class="maintenance-list"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal for Add/Edit Part -->
    <div id="part-modal" class="modal" role="dialog" aria-modal="true" aria-labelledby="part-modal-title">
        <div class="modal-overlay"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="part-modal-title" class="modal-title">Add Part</h2>
                <button class="modal-close" aria-label="Close modal">
                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M18 6L6 18M6 6L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                </button>
            </div>
            <form id="part-form" class="modal-form">
                <div class="form-group">
                    <label for="part-name" class="form-label">Part Name *</label>
                    <input type="text" id="part-name" name="name" class="form-input" required maxlength="50" placeholder="e.g., Motor Unit">
                </div>
                <div class="form-group">
                    <label for="part-quantity" class="form-label">Quantity *</label>
                    <input type="number" id="part-quantity" name="quantity" class="form-input" required min="1" value="1">
                </div>
                <div class="form-group">
                    <label for="part-last-checked" class="form-label">Last Checked</label>
                    <input type="date" id="part-last-checked" name="last_checked" class="form-input">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-ghost" data-dismiss-modal>Cancel</button>
                    <button type="submit" class="btn btn-primary">
                        <span class="btn-text">Save Part</span>
                        <span class="btn-loading hidden">Saving...</span>
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal for Add Maintenance Log -->
    <div id="maintenance-modal" class="modal" role="dialog" aria-modal="true" aria-labelledby="maintenance-modal-title">
        <div class="modal-overlay"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="maintenance-modal-title" class="modal-title">Add Maintenance Log</h2>
                <button class="modal-close" aria-label="Close modal">
                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M18 6L6 18M6 6L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                </button>
            </div>
            <form id="maintenance-form" class="modal-form">
                <div class="form-group">
                    <label for="maintenance-part" class="form-label">Related Part (Optional)</label>
                    <select id="maintenance-part" name="parts_id" class="form-input">
                        <option value="">General Maintenance</option>
                    </select>
                    <small class="form-hint">Select a part if this maintenance is part-specific</small>
                </div>
                <div class="form-group">
                    <label for="maintenance-description" class="form-label">Description *</label>
                    <textarea id="maintenance-description" name="description" class="form-input" required maxlength="200" rows="4" placeholder="Describe the maintenance work performed..."></textarea>
                </div>
                <div class="form-group">
                    <label for="maintenance-done-by" class="form-label">Performed By *</label>
                    <input type="text" id="maintenance-done-by" name="done_by" class="form-input" required maxlength="50" placeholder="e.g., John Doe">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-ghost" data-dismiss-modal>Cancel</button>
                    <button type="submit" class="btn btn-primary">
                        <span class="btn-text">Save Log</span>
                        <span class="btn-loading hidden">Saving...</span>
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Confirmation Modal -->
    <div id="confirm-modal" class="modal" role="dialog" aria-modal="true" aria-labelledby="confirm-modal-title">
        <div class="modal-overlay"></div>
        <div class="modal-content modal-confirm">
            <div class="modal-header">
                <h2 id="confirm-modal-title" class="modal-title">Confirm Action</h2>
            </div>
            <div class="modal-body">
                <p id="confirm-modal-message"></p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-ghost" data-dismiss-modal>Cancel</button>
                <button type="button" class="btn btn-danger" id="confirm-action-btn">
                    <span>Confirm</span>
                </button>
            </div>
        </div>
    </div>

    <script src="config.js"></script>
    <script src="utils.js"></script>
    <script src="api.js"></script>
    <script src="app.js"></script>
</body>
</html>